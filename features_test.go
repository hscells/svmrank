package svmrank_test

import (
	"testing"
	"bytes"
	"github.com/hscells/svmrank"
	"fmt"
)

var features = bytes.NewBufferString(`0 qid:007394 1:2 2:0 3:7 4:1 5:0 18:2 19:14 20:7 21:7 22:1 23:0 24:0 32:0 # 007394
1.5222553735614686e-05 qid:007394 1:3 2:1 3:0 4:4 9:0 10:5.963603747106846 11:5.963603747106846 12:5.963603747106846 13:0 14:14.157353154275055 15:0 16:0 17:1 25:128256 26:9277 27:8.316834272124673 28:8.316834272124673 29:2.3532305250178274 30:1.663985261935285 31:14.905701076643938 32:3 # 007394
1.5223145947683121e-05 qid:007394 1:3 2:1 3:0 4:4 9:0 10:9.131633409678853 11:9.131633409678853 12:9.131633409678853 13:0 14:14.942892608362252 15:0 16:0 17:1 25:9704 26:242817 27:5.598771662176604 28:5.598771662176604 29:0 30:2.498110498653396 31:13.170208680215138 32:3 # 007394
1.5222579483007373e-05 qid:007394 1:3 2:1 3:0 4:4 9:0 10:14.269160455629732 11:14.269160455629732 12:14.269160455629732 13:0 14:21.88996128446692 15:0 16:0 17:1 25:95 26:1347 27:11.388640994176582 28:11.388640994176582 29:0 30:2.036834844533346 31:19.130963443404163 32:3 # 007394
1.5222553735614686e-05 qid:007394 1:3 2:1 3:0 4:4 9:0 10:16.409226619126002 11:16.409226619126002 12:16.409226619126002 13:0 14:14.651734549650797 15:0 16:0 17:1 25:72426 26:16960 27:0 28:0 29:0 30:11.603075416410801 31:13.369670005487194 32:3 # 007394
1.5231132434696519e-05 qid:007394 1:3 2:1 3:0 4:4 9:0 10:12.659722543195633 11:12.659722543195633 12:12.659722543195633 13:0 14:14.230163550823175 15:0 16:0 17:1 25:16202 26:324574 27:11.534029295924855 28:11.534029295924855 29:0 30:0.7959853286810735 31:12.564259447761852 32:3 # 007394
1.5224150238680844e-05 qid:007394 1:3 2:1 3:0 4:4 9:0 10:7.245192000026333 11:7.245192000026333 12:7.245192000026333 13:0 14:14.110146081939106 15:0 16:0 17:1 25:86725 26:2521 27:9.404344629413146 28:9.404344629413146 29:2.159152629386811 30:1.5267514658561785 31:14.979068758300905 32:3 # 007394
1.5228014131597114e-05 qid:007394 1:3 2:1 3:0 4:4 9:0 10:10.367782139713002 11:10.367782139713002 12:10.367782139713002 13:0 14:16.50913950052599 15:0 16:0 17:1 25:3369 26:12493 27:8.792204777704038 28:8.792204777704038 29:0 30:1.1141014369605504 31:16.98062715258841 32:3 # 007394
1.5222553735614686e-05 qid:007394 1:3 2:1 3:0 4:4 9:0 10:14.799788706691904 11:14.799788706691904 12:14.799788706691904 13:0 14:13.901793548746722 15:0 16:0 17:1 25:99942 26:7164 27:16.003761511017835 28:16.003761511017835 29:1.2039728043259341 30:0.8513373343030524 31:13.581622254327515 32:3 # 007394
1.5222708221277287e-05 qid:007394 1:3 2:1 3:0 4:4 9:0 10:8.83878336706863 11:8.83878336706863 12:8.83878336706863 13:0 14:16.472491157311623 15:0 16:0 17:1 25:17429 26:2158 27:9.952456963553841 28:9.952456963553841 29:1.11367359648521 30:0.7874861521031028 31:15.747003330624878 32:3 # 007394`)

func TestReadFeatures(t *testing.T) {
	e, err := svmrank.ReadExamples(features)
	if err != nil {
		t.Fatal(err)
	}
	fmt.Println(e.Examples)
	fmt.Println(e.Statistics)
}

func TestScale(t *testing.T) {
	e, err := svmrank.ReadExamples(features)
	if err != nil {
		t.Fatal(err)
	}
	fmt.Println(e.Scale(0, 1))
}
